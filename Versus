local library = {}
library.flags = {}
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local Hb = game:GetService("RunService").Heartbeat;

local MainBlueColor
local MainBackColor
local MainTextColor

local Halloween = false
local Christmas = false

if Halloween == false and Christmas == false then
	MainBlueColor = Color3.fromRGB(0, 118, 173)
	MainBackColor = Color3.fromRGB(39, 39, 39)
	MainTextColor = Color3.fromRGB(255, 255, 255)
elseif Halloween == true then
	MainBlueColor = Color3.fromRGB(216, 86, 0)
	MainBackColor = Color3.fromRGB(25, 25, 25)
	MainTextColor = Color3.fromRGB(255, 255, 255)
elseif Christmas == true then
	MainBlueColor = Color3.fromRGB(216, 0, 0)
	MainBackColor = Color3.fromRGB(7, 200, 30)
	MainTextColor = Color3.fromRGB(255, 255, 255)
end

function library:CreateWindow(name)
	assert(type(name) == "string", "specify type string for CreateWindow function")

	local UIV2 = Instance.new("ScreenGui")
	local MainFrame = Instance.new("Frame")
	local Title = Instance.new("TextLabel")
	local Containers = Instance.new("Frame")
	local FrameCorner = Instance.new("UICorner")
	local Bar = Instance.new("Frame")
	local SideContainer = Instance.new("Frame")
	local ContainerListLayout = Instance.new("UIListLayout")
	local ContainerPadding = Instance.new("UIPadding")
	local MinimizeButton = Instance.new("TextButton")
	local MinimizeButton = Instance.new("ImageButton")
	local UIS = game:GetService("UserInputService") 
	local CustomizerOpenButton = Instance.new("TextButton")

	function dragify(Frame)
		dragToggle = nil
		local dragSpeed = 0
		dragInput = nil
		dragStart = nil
		local dragPos = nil
		function updateInput(input)
			local Delta = input.Position - dragStart
			local Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + Delta.X, startPos.Y.Scale, startPos.Y.Offset + Delta.Y)
			game:GetService("TweenService"):Create(Frame, TweenInfo.new(0.25), {Position = Position}):Play()
		end
		Frame.InputBegan:Connect(function(input)
			if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and UIS:GetFocusedTextBox() == nil then
				dragToggle = true
				dragStart = input.Position
				startPos = Frame.Position
				input.Changed:Connect(function()
					if input.UserInputState == Enum.UserInputState.End then
						dragToggle = false
					end
				end)
			end
		end)
		Frame.InputChanged:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
				dragInput = input
			end
		end)
		game:GetService("UserInputService").InputChanged:Connect(function(input)
			if input == dragInput and dragToggle then
				updateInput(input)
			end
		end)
	end

	dragify(MainFrame)

	UIV2.Name = "UI V2"
	UIV2.Parent = game:GetService("CoreGui")
	UIV2.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

	MainFrame.Name = "MainFrame"
	MainFrame.Parent = UIV2
	MainFrame.BackgroundColor3 = MainBackColor
	MainFrame.BorderSizePixel = 0
	MainFrame.Position = UDim2.new(0.312544763, 0, 0.166574314, 0)
	MainFrame.Size = UDim2.new(0, 502, 0, 74)

	Title.Name = name
	Title.Parent = MainFrame
	Title.BackgroundColor3 = MainTextColor
	Title.BackgroundTransparency = 1.000
	Title.BorderSizePixel = 0
	Title.Position = UDim2.new(0.0200714413, 0, 0.00306394883, 0)
	Title.Size = UDim2.new(0, 458, 0, 30)
	Title.Font = Enum.Font.SourceSans
	Title.Text = name
	Title.TextColor3 = MainBlueColor
	Title.TextSize = 23.000
	Title.TextXAlignment = Enum.TextXAlignment.Left

	Bar.Name = "Bar"
	Bar.Parent = MainFrame
	Bar.BackgroundColor3 = MainBlueColor
	Bar.BorderSizePixel = 0
	Bar.Position = UDim2.new(0, 0, 0.408469319, 0)
	Bar.Size = UDim2.new(1, 0, 0.0199999996, 0)

	-- FrameCorner.CornerRadius = UDim.new(0, 3)
	-- FrameCorner.Name = "FrameCorner"
	-- FrameCorner.Parent = MainFrame

	SideContainer.Name = "SideContainer"
	SideContainer.Parent = MainFrame
	SideContainer.BackgroundColor3 = Color3.fromRGB(43, 43, 43)
	SideContainer.BackgroundTransparency = 1.000
	SideContainer.BorderSizePixel = 0
	SideContainer.Position = UDim2.new(0, 0, 0.468414396, 0)
	SideContainer.Size = UDim2.new(0, 501, 0, 37)

	ContainerListLayout.Name = "ContainerListLayout"
	ContainerListLayout.Parent = SideContainer
	ContainerListLayout.FillDirection = Enum.FillDirection.Horizontal
	ContainerListLayout.SortOrder = Enum.SortOrder.LayoutOrder
	ContainerListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
	ContainerListLayout.Padding = UDim.new(0.00999999978, 1)

	ContainerPadding.Name = "ContainerPadding"
	ContainerPadding.Parent = SideContainer
	ContainerPadding.PaddingLeft = UDim.new(0, 10)
	ContainerPadding.PaddingTop = UDim.new(0, 2)

	Containers.Name = "Containers"
	Containers.Parent = MainFrame
	Containers.BackgroundColor3 = MainBackColor
	Containers.BorderSizePixel = 0
	Containers.ClipsDescendants = true
	Containers.Position = UDim2.new(0, 0, 0.99000001, 0)
	Containers.Size = UDim2.new(0, 502, 0, 473)

	MinimizeButton.Name = "MinimizeButton"
	MinimizeButton.Parent = MainFrame
	MinimizeButton.BackgroundTransparency = 1.000
	MinimizeButton.Position = UDim2.new(1, -30, 0.0670000017, 0)
	MinimizeButton.Size = UDim2.new(0, 25, 0, 25)
	MinimizeButton.ZIndex = 2
	MinimizeButton.Image = "rbxassetid://3926307971"
	MinimizeButton.ImageRectOffset = Vector2.new(164, 484)
	MinimizeButton.ImageRectSize = Vector2.new(36, 36)

	CustomizerOpenButton.Name = "CustomizerOpenButton"
	CustomizerOpenButton.Parent = MainFrame
	CustomizerOpenButton.BackgroundColor3 = MainTextColor
	CustomizerOpenButton.BackgroundTransparency = 1.000
	CustomizerOpenButton.Position = UDim2.new(0.942231238, -30, 0.0270270277, 0)
	CustomizerOpenButton.Size = UDim2.new(0, 25, 0, 25)
	CustomizerOpenButton.Font = Enum.Font.SourceSans
	CustomizerOpenButton.Text = "UI"
	CustomizerOpenButton.TextColor3 = Color3.fromRGB(255, 190, 197)
	CustomizerOpenButton.TextScaled = true
	CustomizerOpenButton.TextSize = 14.000
	CustomizerOpenButton.TextStrokeColor3 = Color3.fromRGB(255, 190, 197)
	CustomizerOpenButton.TextStrokeTransparency = 0.000
	CustomizerOpenButton.TextWrapped = true

	local twnInf = TweenInfo.new(1, Enum.EasingStyle.Elastic)

	local twnDown = game:GetService("TweenService")
	local twDown = twnDown:Create(MinimizeButton, twnInf, { Rotation = 180 })

	local twnUp = game:GetService("TweenService")
	local twUp = twnUp:Create(MinimizeButton, twnInf, { Rotation = 0 })

	UIS.InputBegan:Connect(function(input)
		local keyprsd = input.KeyCode.EnumType.RightControl
		if input.KeyCode == keyprsd then
			Containers.Visible = not Containers.Visible
			if Containers.Visible == false then
				--down
				twDown:Play()
				twDown:Destroy()
			else
				--up
				twUp:Play()
				twUp:Destroy()
			end
		end
	end)

	MinimizeButton.MouseButton1Click:Connect(function()
		Containers.Visible = not Containers.Visible
		if Containers.Visible == false then
			--down
			twDown:Play()
			twDown:Destroy()
		else
			--up
			twUp:Play()
			twUp:Destroy()
		end
	end)

	-- Customizer

	local CustomizerFrame = Instance.new("Frame")
	local CustomizerTitle = Instance.new("TextLabel")
	local CustomizerFrameCorner = Instance.new("UICorner")
	local CustomizerBar = Instance.new("Frame")
	local CustomizerContainers = Instance.new("Frame")
	local CustomizerCategoriesGridLayout = Instance.new("UIGridLayout")
	local CustomizerCategoriesPadding = Instance.new("UIPadding")
	local CustomizerCloseButton = Instance.new("TextButton")

	local CustomizerSideContainer = Instance.new("Frame")
	local CustomizerContainerListLayout = Instance.new("UIListLayout")
	local CustomizerContainerPadding = Instance.new("UIPadding")
	local CustomizerMain = Instance.new("TextButton")
	local CustomizerMainUICorner = Instance.new("UICorner")
	local CustomizerText = Instance.new("TextButton")
	local CustomizerTextUICorner = Instance.new("UICorner")
	local CustomizerBack = Instance.new("TextButton")
	local CustomizerBackUICorner = Instance.new("UICorner")

	CustomizerFrame.Name = "CustomizerFrame"
	CustomizerFrame.Parent = UIV2
	CustomizerFrame.BackgroundColor3 = MainBackColor
	CustomizerFrame.BorderSizePixel = 0
	CustomizerFrame.Position = UDim2.new(0.488822609, 0, 0.223434627, 0)
	CustomizerFrame.Size = UDim2.new(0, 502, 0, 74)
	CustomizerFrame.Visible = false

	CustomizerTitle.Name = "CustomizerTitle"
	CustomizerTitle.Parent = CustomizerFrame
	CustomizerTitle.BackgroundColor3 = MainTextColor
	CustomizerTitle.BackgroundTransparency = 1.000
	CustomizerTitle.BorderSizePixel = 0
	CustomizerTitle.Position = UDim2.new(0.0200714413, 0, 0.00306394883, 0)
	CustomizerTitle.Size = UDim2.new(0, 458, 0, 30)
	CustomizerTitle.Font = Enum.Font.SourceSans
	CustomizerTitle.Text = "UI Customize"
	CustomizerTitle.TextColor3 = MainTextColor
	CustomizerTitle.TextSize = 23.000
	CustomizerTitle.TextXAlignment = Enum.TextXAlignment.Left

	CustomizerFrameCorner.CornerRadius = UDim.new(0, 3)
	CustomizerFrameCorner.Name = "CustomizerFrameCorner"
	CustomizerFrameCorner.Parent = CustomizerFrame

	CustomizerBar.Name = "CustomizerBar"
	CustomizerBar.Parent = CustomizerFrame
	CustomizerBar.BackgroundColor3 = MainBlueColor
	CustomizerBar.BorderSizePixel = 0
	CustomizerBar.Position = UDim2.new(0, 0, 0.408469319, 0)
	CustomizerBar.Size = UDim2.new(1, 0, 0.0199999996, 0)

	CustomizerContainers.Name = "CustomizerContainers"
	CustomizerContainers.Parent = CustomizerFrame
	CustomizerContainers.BackgroundColor3 = MainBackColor
	CustomizerContainers.BorderSizePixel = 0
	CustomizerContainers.ClipsDescendants = true
	CustomizerContainers.Position = UDim2.new(0, 0, 0.98999995, 0)
	CustomizerContainers.Size = UDim2.new(0, 502, 0, 168)

	CustomizerCategoriesGridLayout.Name = "CustomizerCategoriesGridLayout"
	CustomizerCategoriesGridLayout.Parent = CustomizerContainers
	CustomizerCategoriesGridLayout.SortOrder = Enum.SortOrder.LayoutOrder
	CustomizerCategoriesGridLayout.CellPadding = UDim2.new(0, 10, 0, 10)
	CustomizerCategoriesGridLayout.CellSize = UDim2.new(0, 50, 0, 40)

	CustomizerCategoriesPadding.Name = "CustomizerCategoriesPadding"
	CustomizerCategoriesPadding.Parent = CustomizerContainers
	CustomizerCategoriesPadding.PaddingLeft = UDim.new(0, 20)
	CustomizerCategoriesPadding.PaddingTop = UDim.new(0, 10)

	CustomizerCloseButton.Name = "CustomizerCloseButton"
	CustomizerCloseButton.Parent = CustomizerFrame
	CustomizerCloseButton.BackgroundColor3 = MainTextColor
	CustomizerCloseButton.BackgroundTransparency = 1.000
	CustomizerCloseButton.Position = UDim2.new(1.00000012, -30, 0, 0)
	CustomizerCloseButton.Size = UDim2.new(0, 30, 0, 29)
	CustomizerCloseButton.Font = Enum.Font.SourceSans
	CustomizerCloseButton.Text = "X"
	CustomizerCloseButton.TextColor3 = Color3.fromRGB(255, 190, 197)
	CustomizerCloseButton.TextScaled = true
	CustomizerCloseButton.TextSize = 14.000
	CustomizerCloseButton.TextStrokeColor3 = Color3.fromRGB(255, 190, 197)
	CustomizerCloseButton.TextStrokeTransparency = 0.000
	CustomizerCloseButton.TextWrapped = true


	CustomizerSideContainer.Name = "CustomizerSideContainer"
	CustomizerSideContainer.Parent = CustomizerFrame
	CustomizerSideContainer.BackgroundColor3 = Color3.fromRGB(43, 43, 43)
	CustomizerSideContainer.BackgroundTransparency = 1.000
	CustomizerSideContainer.BorderSizePixel = 0
	CustomizerSideContainer.Position = UDim2.new(0, 0, 0.468414396, 0)
	CustomizerSideContainer.Size = UDim2.new(0, 501, 0, 37)

	CustomizerContainerListLayout.Name = "CustomizerContainerListLayout"
	CustomizerContainerListLayout.Parent = CustomizerSideContainer
	CustomizerContainerListLayout.FillDirection = Enum.FillDirection.Horizontal
	CustomizerContainerListLayout.SortOrder = Enum.SortOrder.LayoutOrder
	CustomizerContainerListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
	CustomizerContainerListLayout.Padding = UDim.new(0.00999999978, 1)

	CustomizerContainerPadding.Name = "CustomizerContainerPadding"
	CustomizerContainerPadding.Parent = CustomizerSideContainer
	CustomizerContainerPadding.PaddingLeft = UDim.new(0, 10)
	CustomizerContainerPadding.PaddingTop = UDim.new(0, 2)

	CustomizerMain.Name = "CustomizerMain"
	CustomizerMain.Parent = CustomizerSideContainer
	CustomizerMain.BackgroundColor3 = MainBlueColor
	CustomizerMain.Position = UDim2.new(-0.0203665979, 0, -0.260869563, 0)
	CustomizerMain.Size = UDim2.new(0, 85, 0, 23)
	CustomizerMain.Font = Enum.Font.SourceSans
	CustomizerMain.Text = "Main"
	CustomizerMain.TextColor3 = MainTextColor
	CustomizerMain.TextSize = 20.000

	CustomizerMainUICorner.CornerRadius = UDim.new(0, 5)
	CustomizerMainUICorner.Name = "CustomizerMainUICorner"
	CustomizerMainUICorner.Parent = CustomizerMain

	CustomizerText.Name = "CustomizerText"
	CustomizerText.Parent = CustomizerSideContainer
	CustomizerText.BackgroundColor3 = MainBlueColor
	CustomizerText.Position = UDim2.new(-0.0203665979, 0, -0.260869563, 0)
	CustomizerText.Size = UDim2.new(0, 85, 0, 23)
	CustomizerText.Font = Enum.Font.SourceSans
	CustomizerText.Text = "Text"
	CustomizerText.TextColor3 = MainTextColor
	CustomizerText.TextSize = 20.000

	CustomizerTextUICorner.CornerRadius = UDim.new(0, 5)
	CustomizerTextUICorner.Name = "CustomizerMainUICorner"
	CustomizerTextUICorner.Parent = CustomizerText

	CustomizerBack.Name = "CustomizerBack"
	CustomizerBack.Parent = CustomizerSideContainer
	CustomizerBack.BackgroundColor3 = MainBlueColor
	CustomizerBack.Position = UDim2.new(-0.0203665979, 0, -0.260869563, 0)
	CustomizerBack.Size = UDim2.new(0, 85, 0, 23)
	CustomizerBack.Font = Enum.Font.SourceSans
	CustomizerBack.Text = "Back"
	CustomizerBack.TextColor3 = MainTextColor
	CustomizerBack.TextSize = 20.000

	CustomizerBackUICorner.CornerRadius = UDim.new(0, 5)
	CustomizerBackUICorner.Name = "CustomizerBackUICorner"
	CustomizerBackUICorner.Parent = CustomizerBack

	local Colors = {
		["BackgroundColor"] = MainBackColor,
		["Yellow"] = Color3.fromRGB(255, 236, 89),
		["Pink"] = Color3.fromRGB(255, 133, 139),
		["Red"] = Color3.fromRGB(235, 0, 3),
		["Purple"] = Color3.fromRGB(92, 35, 207),
		["Green"] = Color3.fromRGB(0, 170, 0),
		["Orange"] = Color3.fromRGB(216, 86, 0),

		["White"] = Color3.fromRGB(255,255,255),
		["Black"] = Color3.fromRGB(0,0,0),
		["Default"] = Color3.fromRGB(0, 118, 173)
	}

	CustomizerCloseButton.MouseButton1Click:Connect(function()
		CustomizerFrame.Visible = false
		MainFrame.Visible = true
	end)

	CustomizerOpenButton.MouseButton1Click:Connect(function()
		CustomizerFrame.Visible = true
		MainFrame.Visible = false
	end)

	function getColors()
		for _,v  in pairs(Colors) do
			local ColorButton = Instance.new("TextButton")
			ColorButton.Name = "ColorButton"
			ColorButton.Parent = CustomizerContainers
			ColorButton.BackgroundColor3 = v
			ColorButton.Size = UDim2.new(0, 57, 0, 40)
			ColorButton.Font = Enum.Font.SourceSans
			ColorButton.Text = ""

			ColorButton.MouseButton1Click:Connect(function()
				CustomizerBar.BackgroundColor3 = v
				Bar.BackgroundColor3 = v
				CustomizerMain.BackgroundColor3 = v
				CustomizerText.BackgroundColor3 = v
				CustomizerBack.BackgroundColor3 = v
				for _,SideButton in pairs(SideContainer:GetChildren()) do
					if SideButton:IsA("TextButton") then
						SideButton.BackgroundColor3 = v
					end
				end
				for _,CustomFrame in pairs(Containers:GetChildren()) do
					for _,thing in pairs(CustomFrame:GetChildren()) do
						if thing:IsA("UIGridLayout") or thing:IsA("UIPadding") then
						else
							if thing.Name == "Dropdown" then
								thing.BackgroundColor3 = v
								thing.DropdownText.DropdownToggleButton.BackgroundColor3 = v
								if v == Color3.fromRGB(0,0,0) then
									thing.DropdownText.DropdownToggleButton.DropdownToggleUIStroke.Color = Color3.fromRGB(255,255,255)
								else
									thing.DropdownText.DropdownToggleButton.DropdownToggleUIStroke.Color = Color3.fromRGB(0,0,0)
								end
								for _,lilbut in pairs(thing.DropdownContainers:GetChildren()) do
									if lilbut:IsA("TextButton") then
										lilbut.BackgroundColor3 = v
									end
								end
							end
							thing.BackgroundColor3 = v
						end
					end
				end
			end)
		end
	end

	function getTextColors()
		for _,v  in pairs(Colors) do
			local ColorButton = Instance.new("TextButton")
			ColorButton.Name = "ColorButton"
			ColorButton.Parent = CustomizerContainers
			ColorButton.BackgroundColor3 = v
			ColorButton.Size = UDim2.new(0, 57, 0, 40)
			ColorButton.Font = Enum.Font.SourceSans
			ColorButton.Text = "text"
			ColorButton.TextScaled = true

			ColorButton.MouseButton1Click:Connect(function()
				CustomizerMain.TextColor3 = v
				CustomizerText.TextColor3 = v
				Title.TextColor3 = v
				CustomizerTitle.TextColor3 = v
				CustomizerBack.TextColor3 = v
				for _,SideButton in pairs(SideContainer:GetChildren()) do
					if SideButton:IsA("TextButton") then
						SideButton.TextColor3 = v
					end
				end
				for _,CustomFrame in pairs(Containers:GetChildren()) do

					for _,thing in pairs(CustomFrame:GetChildren()) do
						if thing:IsA("UIGridLayout") or thing:IsA("UIPadding") then
						else
							if thing.Name == "Dropdown" then
								thing.DropdownText.TextColor3 = v
								thing.DropdownText.DropdownToggleButton.TextColor3 = v
								for _,lilbut in pairs(thing.DropdownContainers:GetChildren()) do
									if lilbut:IsA("TextButton") then
										lilbut.TextColor3 = v
									end
								end

							elseif thing.Name == "Button" then
								thing.TextColor3 = v
							else
								thing.Label.TextColor3 = v
							end
						end
					end

				end
			end)
		end
	end

	function getBackColors()
		for _,v  in pairs(Colors) do
			local ColorButton = Instance.new("TextButton")
			ColorButton.Name = "ColorButton"
			ColorButton.Parent = CustomizerContainers
			ColorButton.BackgroundColor3 = v
			ColorButton.Size = UDim2.new(0, 57, 0, 40)
			ColorButton.Font = Enum.Font.SourceSans
			ColorButton.Text = "back"
			ColorButton.TextScaled = true

			ColorButton.MouseButton1Click:Connect(function()
				CustomizerFrame.BackgroundColor3 = v
				CustomizerContainers.BackgroundColor3 = v
				MainFrame.BackgroundColor3 = v
				Containers.BackgroundColor3 = v
			end)
		end
	end


	getColors()

	CustomizerMain.MouseButton1Click:Connect(function()
		for _,v in pairs(CustomizerContainers:GetChildren()) do
			if v:IsA("TextButton") then
				v:Destroy()
			end
		end
		getColors()
	end)

	CustomizerText.MouseButton1Click:Connect(function()
		for _,v in pairs(CustomizerContainers:GetChildren()) do
			if v:IsA("TextButton") then
				v:Destroy()
			end
		end
		getTextColors()
	end)

	CustomizerBack.MouseButton1Click:Connect(function()
		for _,v in pairs(CustomizerContainers:GetChildren()) do
			if v:IsA("TextButton") then
				v:Destroy()
			end
		end
		getBackColors()
	end)

	local category = {}

	function category:new(name)
		assert(type(name) == "string", "specify type string for new() function")
		local Categories = Instance.new("ScrollingFrame")
		local CategoriesPadding = Instance.new("UIPadding")
		local CategoriesGridLayout = Instance.new("UIGridLayout")
		local CategoryBtn = Instance.new("TextButton")
		local UICorner = Instance.new("UICorner")

		Categories.Name = name
		Categories.Parent = Containers
		Categories.Active = true
		Categories.BackgroundColor3 = MainTextColor
		Categories.BackgroundTransparency = 1.000
		Categories.BorderSizePixel = 0
		Categories.Position = UDim2.new(0, 0, -0.00145806919, 0)
		Categories.Size = UDim2.new(0, 501, 0, 474)
		Categories.ScrollBarThickness = 6
		Categories.Visible = false

		CategoriesPadding.Name = "CategoriesPadding"
		CategoriesPadding.Parent = Categories
		CategoriesPadding.PaddingLeft = UDim.new(0, 20)
		CategoriesPadding.PaddingTop = UDim.new(0, 10)

		CategoriesGridLayout.Name = "CategoriesGridLayout"
		CategoriesGridLayout.Parent = Categories
		CategoriesGridLayout.SortOrder = Enum.SortOrder.LayoutOrder
		CategoriesGridLayout.CellPadding = UDim2.new(0, 0, 0, 10)
		CategoriesGridLayout.CellSiz